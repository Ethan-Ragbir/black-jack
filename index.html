<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Elite Blackjack Casino - Multi-Hand Experience</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --table-dark: #0a1f0d;
      --table-light: #1a4d2e;
      --table-accent: #2d7d4a;
      --gold: #ffd700;
      --gold-dark: #b8860b;
      --silver: #c0c0c0;
      --red: #dc3545;
      --red-dark: #c82333;
      --blue: #007bff;
      --blue-dark: #0056b3;
      --green: #28a745;
      --green-dark: #1e7e34;
      --purple: #6f42c1;
      --black: #212529;
      --white: #ffffff;
      --text-light: #f8f9fa;
      --text-muted: #6c757d;
      --shadow: rgba(0, 0, 0, 0.5);
      --glow: rgba(255, 215, 0, 0.3);
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: radial-gradient(ellipse at center, var(--table-light), var(--table-dark));
      color: var(--text-light);
      font-family: 'Poppins', sans-serif;
      overflow: hidden;
      height: 100vh;
      user-select: none;
    }
    
    /* Welcome Screen */
    .welcome-screen, .deposit-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, var(--table-dark), var(--black));
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    
    .welcome-card, .deposit-card {
      background: linear-gradient(135deg, var(--table-light), var(--table-accent));
      padding: 60px;
      border-radius: 20px;
      border: 3px solid var(--gold);
      box-shadow: 0 20px 40px var(--shadow), 0 0 30px var(--glow);
      text-align: center;
      max-width: 500px;
      width: 90%;
    }
    
    .welcome-title {
      font-size: 3em;
      font-weight: 800;
      color: var(--gold);
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px var(--shadow);
    }
    
    .welcome-subtitle {
      font-size: 1.2em;
      margin-bottom: 30px;
      color: var(--text-light);
      opacity: 0.9;
    }
    
    .input-group {
      margin: 20px 0;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 10px;
      font-weight: 600;
      color: var(--gold);
    }
    
    .input-group input {
      width: 100%;
      padding: 15px;
      border: 2px solid var(--gold);
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
      color: var(--text-light);
      font-size: 1.1em;
      text-align: center;
    }
    
    .input-group input:focus {
      outline: none;
      box-shadow: 0 0 15px var(--glow);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      color: var(--black);
      border: none;
      padding: 15px 40px;
      border-radius: 10px;
      font-size: 1.2em;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px var(--shadow);
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px var(--shadow);
    }
    
    /* Deposit amounts */
    .deposit-amounts {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    
    .deposit-btn {
      padding: 15px;
      background: linear-gradient(135deg, var(--blue), var(--blue-dark));
      color: white;
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .deposit-btn:hover, .deposit-btn.selected {
      border-color: var(--gold);
      box-shadow: 0 0 15px var(--glow);
      transform: scale(1.05);
    }
    
    /* Game Table */
    .game-table {
      position: relative;
      width: 100%;
      height: 100vh;
      overflow: hidden;
    }
    
    .game-table.hidden {
      display: none;
    }
    
    /* Header */
    .game-header {
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 30px;
      z-index: 100;
    }
    
    .player-info {
      background: linear-gradient(135deg, var(--black), var(--table-dark));
      padding: 15px 25px;
      border-radius: 15px;
      border: 2px solid var(--gold);
      box-shadow: 0 5px 15px var(--shadow);
    }
    
    .player-name {
      font-size: 1.3em;
      font-weight: 700;
      color: var(--gold);
      margin-bottom: 5px;
    }
    
    .player-balance {
      font-size: 1.1em;
      color: var(--text-light);
    }
    
    .game-stats {
      background: linear-gradient(135deg, var(--black), var(--table-dark));
      padding: 15px 25px;
      border-radius: 15px;
      border: 2px solid var(--gold);
      box-shadow: 0 5px 15px var(--shadow);
      text-align: right;
    }
    
    .stat-row {
      display: flex;
      justify-content: space-between;
      margin: 3px 0;
      min-width: 150px;
    }
    
    .stat-label {
      color: var(--text-muted);
      font-size: 0.9em;
    }
    
    .stat-value {
      color: var(--gold);
      font-weight: 600;
    }
    
    /* Dealer Area */
    .dealer-area {
      position: absolute;
      top: 100px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 50;
    }
    
    .dealer-avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 3px solid var(--gold);
      box-shadow: 0 0 20px var(--glow);
      transition: transform 0.3s ease;
    }
    
    .dealer-avatar:hover {
      transform: scale(1.1);
    }
    
    .dealer-speech {
      margin-top: 15px;
      padding: 12px 20px;
      background: linear-gradient(135deg, var(--white), #f0f0f0);
      color: var(--black);
      border-radius: 20px;
      font-weight: 600;
      display: inline-block;
      box-shadow: 0 5px 15px var(--shadow);
      position: relative;
      max-width: 350px;
      animation: fadeIn 0.5s ease;
    }
    
    .dealer-speech::before {
      content: '';
      position: absolute;
      bottom: -8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 10px solid transparent;
      border-right: 10px solid transparent;
      border-top: 8px solid var(--white);
    }
    
    .dealer-speech.hidden {
      display: none;
    }
    
    .dealer-total {
      margin-top: 10px;
      padding: 8px 16px;
      background: linear-gradient(135deg, var(--black), var(--table-dark));
      color: var(--gold);
      border-radius: 15px;
      border: 2px solid var(--gold);
      font-weight: 700;
      font-size: 1.1em;
      display: none;
    }
    
    /* Card Areas */
    .card-container {
      position: absolute;
      width: 100%;
      height: 100%;
      pointer-events: none;
    }
    
    .dealer-cards {
      position: absolute;
      top: 200px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      align-items: center;
    }
    
    /* Player Hands */
    .player-hands {
      position: absolute;
      bottom: 200px;
      left: 0;
      right: 0;
      display: flex;
      justify-content: center;
      gap: 80px;
      flex-wrap: wrap;
    }
    
    .hand-container {
      position: relative;
      min-width: 200px;
      text-align: center;
    }
    
    .hand-cards {
      display: flex;
      gap: 15px;
      justify-content: center;
      align-items: center;
      margin-bottom: 15px;
      min-height: 120px;
    }
    
    .hand-info {
      background: linear-gradient(135deg, var(--black), var(--table-dark));
      padding: 10px 15px;
      border-radius: 10px;
      border: 2px solid var(--gold);
      margin-bottom: 10px;
    }
    
    .hand-bet {
      color: var(--gold);
      font-weight: 700;
      font-size: 1.1em;
    }
    
    .hand-total {
      color: var(--text-light);
      font-weight: 600;
      margin-top: 5px;
    }
    
    .hand-total.bust {
      color: var(--red);
      animation: shake 0.5s ease;
    }
    
    .hand-total.blackjack {
      color: var(--green);
      animation: pulse 1s ease infinite;
    }
    
    .hand-controls {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .hand-controls button {
      padding: 8px 16px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      color: var(--black);
      border: none;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 0.9em;
    }
    
    .hand-controls button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 5px 10px var(--shadow);
    }
    
    .hand-controls button:disabled {
      background: var(--text-muted);
      cursor: not-allowed;
      opacity: 0.5;
    }
    
    .hand-controls .btn-danger {
      background: linear-gradient(135deg, var(--red), var(--red-dark));
      color: white;
    }
    
    .hand-controls .btn-success {
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      color: white;
    }
    
    /* Card Styling */
    .card {
      width: 70px;
      height: 100px;
      position: relative;
      transform-style: preserve-3d;
      transition: all 0.6s ease;
      border-radius: 8px;
      box-shadow: 0 5px 15px var(--shadow);
      cursor: pointer;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .card-face, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
    }
    
    .card-face {
      background: linear-gradient(135deg, var(--white), #f8f8f8);
      border: 2px solid #ddd;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: center;
      padding: 6px;
      font-weight: 700;
      font-size: 12px;
      color: var(--black);
    }
    
    .card-face.red {
      color: var(--red);
    }
    
    .card-back {
      background: repeating-linear-gradient(
        45deg,
        var(--table-accent) 0,
        var(--table-accent) 6px,
        var(--table-light) 6px,
        var(--table-light) 12px
      );
      border: 2px solid var(--gold);
      transform: rotateY(180deg);
    }
    
    .card.flipped {
      transform: rotateY(180deg);
    }
    
    .card.dealing {
      animation: dealCard 0.8s ease forwards;
    }
    
    /* Betting Area */
    .betting-area {
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      text-align: center;
      z-index: 100;
    }
    
    .chips-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .chip {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 8px 16px var(--shadow);
      overflow: hidden;
    }
    
    .chip:hover {
      transform: scale(1.1) translateY(-8px);
      box-shadow: 0 12px 24px var(--shadow);
    }
    
    .chip:active {
      transform: scale(0.95) translateY(-4px);
    }
    
    .chip-5 {
      background: radial-gradient(circle at 30% 30%, #ff6b6b, var(--red-dark));
      border: 4px solid #ff8e8e;
    }
    
    .chip-10 {
      background: radial-gradient(circle at 30% 30%, #4ecdc4, #26a69a);
      border: 4px solid #80cbc4;
    }
    
    .chip-25 {
      background: radial-gradient(circle at 30% 30%, var(--gold), var(--gold-dark));
      border: 4px solid #ffeb3b;
    }
    
    .chip-50 {
      background: radial-gradient(circle at 30% 30%, #9c27b0, var(--purple));
      border: 4px solid #ce93d8;
    }
    
    .chip-100 {
      background: radial-gradient(circle at 30% 30%, #607d8b, #455a64);
      border: 4px solid #90a4ae;
    }
    
    .chip::before {
      content: '';
      position: absolute;
      top: 8px;
      left: 8px;
      right: 8px;
      bottom: 8px;
      border: 2px dashed rgba(255, 255, 255, 0.5);
      border-radius: 50%;
    }
    
    .chip-value {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-weight: 800;
      font-size: 14px;
      color: white;
      text-shadow: 2px 2px 4px var(--shadow);
    }
    
    .game-controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    
    .game-controls button {
      padding: 12px 25px;
      background: linear-gradient(135deg, var(--gold), var(--gold-dark));
      color: var(--black);
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px var(--shadow);
    }
    
    .game-controls button:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px var(--shadow);
    }
    
    .game-controls button:disabled {
      background: var(--text-muted);
      cursor: not-allowed;
      opacity: 0.5;
    }
    
    .game-controls .btn-danger {
      background: linear-gradient(135deg, var(--red), var(--red-dark));
      color: white;
    }
    
    .game-controls .btn-success {
      background: linear-gradient(135deg, var(--green), var(--green-dark));
      color: white;
    }
    
    /* Insurance Modal */
    .insurance-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    
    .insurance-modal.hidden {
      display: none;
    }
    
    .insurance-content {
      background: linear-gradient(135deg, var(--table-light), var(--table-accent));
      padding: 40px;
      border-radius: 20px;
      border: 3px solid var(--gold);
      text-align: center;
      box-shadow: 0 20px 40px var(--shadow);
    }
    
    .insurance-title {
      font-size: 2em;
      color: var(--gold);
      margin-bottom: 20px;
      font-weight: 700;
    }
    
    .insurance-text {
      font-size: 1.2em;
      margin-bottom: 30px;
      line-height: 1.6;
    }
    
    .insurance-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
    }
    
    /* Result Modal */
    .result-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
    }
    
    .result-modal.hidden {
      display: none;
    }
    
    .result-content {
      background: linear-gradient(135deg, var(--table-light), var(--table-accent));
      padding: 50px;
      border-radius: 20px;
      border: 3px solid var(--gold);
      text-align: center;
      box-shadow: 0 20px 40px var(--shadow);
      max-width: 600px;
      width: 90%;
    }
    
    .result-title {
      font-size: 3em;
      font-weight: 800;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px var(--shadow);
    }
    
    .result-title.win {
      color: var(--green);
    }
    
    .result-title.lose {
      color: var(--red);
    }
    
    .result-title.push {
      color: var(--gold);
    }
    
    .result-details {
      font-size: 1.3em;
      margin-bottom: 30px;
      line-height: 1.8;
    }
    
    .result-payout {
      font-size: 2em;
      font-weight: 700;
      margin-bottom: 30px;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes dealCard {
      0% {
        transform: translate(-50%, -300px) rotate(0deg);
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 1;
      }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    /* Hand selector buttons */
    .hand-selector {
      margin-bottom: 20px;
    }
    
    .hand-btn {
      padding: 10px 20px;
      margin: 0 5px;
      background: linear-gradient(135deg, var(--blue), var(--blue-dark));
      color: white;
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .hand-btn.active {
      border-color: var(--gold);
      box-shadow: 0 0 15px var(--glow);
    }
    
    .hand-btn:hover {
      transform: translateY(-2px);
    }
    
    /* Responsive Design */
    @media (max-width: 1200px) {
      .player-hands {
        gap: 40px;
      }
      
      .hand-container {
        min-width: 150px;
      }
    }
    
    @media (max-width: 768px) {
      .game-header {
        flex-direction: column;
        gap: 15px;
        padding: 15px;
      }
      
      .dealer-area {
        top: 160px;
      }
      
      .player-hands {
        bottom: 250px;
        gap: 20px;
      }
      
      .chips-container {
        gap: 10px;
      }
      
      .chip {
        width: 60px;
        height: 60px;
      }
      
      .chip-value {
        font-size: 12px;
      }
      
      .game-controls {
        gap: 10px;
      }
      
      .game-controls button {
        padding: 10px 20px;
        font-size: 0.9em;
      }
    }
  </style>
</head>
<body>
  <!-- Welcome Screen -->
  <div id="welcome-screen" class="welcome-screen">
    <div class="welcome-card">
      <h1 class="welcome-title">🎰 Elite Casino</h1>
      <p class="welcome-subtitle">Welcome to the most realistic blackjack experience</p>
      <div class="input-group">
        <label for="player-name">Enter Your Name:</label>
        <input type="text" id="player-name" placeholder="Your Name" maxlength="20">
      </div>
      <button class="btn-primary" onclick="game.setPlayerName()">Enter Casino</button>
    </div>
  </div>

  <!-- Deposit Screen -->
  <div id="deposit-screen" class="deposit-screen hidden">
    <div class="deposit-card">
      <h2 class="welcome-title">💰 Deposit Funds</h2>
      <p class="welcome-subtitle">Choose your starting bankroll</p>
      
      <div class="deposit-amounts">
        <button class="deposit-btn" data-amount="500">$500</button>
        <button class="deposit-btn" data-amount="1000">$1,000</button>
        <button class="deposit-btn" data-amount="2500">$2,500</button>
        <button class="deposit-btn" data-amount="5000">$5,000</button>
        <button class="deposit-btn" data-amount="10000">$10,000</button>
        <button class="deposit-btn" data-amount="25000">$25,000</button>
      </div>
      
      <div class="input-group">
        <label for="custom-amount">Or enter custom amount:</label>
        <input type="number" id="custom-amount" placeholder="Enter amount" min="100" max="100000">
      </div>
      
      <button class="btn-primary" onclick="game.processDeposit()">Confirm Deposit</button>
    </div>
  </div>

  <!-- Game Table -->
  <div id="game-table" class="game-table hidden">
    <!-- Header -->
    <div class="game-header">
      <div class="player-info">
        <div class="player-name" id="display-name">Player</div>
        <div class="player-balance">Balance: $<span id="balance">0</span></div>
      </div>
      
      <div class="game-stats">
        <div class="stat-row">
          <span class="stat-label">Hands Won:</span>
          <span class="stat-value" id="hands-won">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Hands Lost:</span>
          <span class="stat-value" id="hands-lost">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Pushes:</span>
          <span class="stat-value" id="pushes">0</span>
        </div>
        <div class="stat-row">
          <span class="stat-label">Win Rate:</span>
          <span class="stat-value" id="win-rate">0%</span>
        </div>
      </div>
    </div>

    <!-- Dealer Area -->
    <div class="dealer-area">
      <img class="dealer-avatar" 
           src="https://raw.githubusercontent.com/Ethan-Ragbir/black-jack/main/dealer-avatar.png" 
           alt="Dealer">
      <div id="dealer-speech" class="dealer-speech hidden">Welcome to the table!</div>
      <div id="dealer-total" class="dealer-total">Total: 0</div>
    </div>

    <!-- Card Container -->
    <div class="card-container">
      <div id="dealer-cards" class="dealer-cards"></div>
    </div>

    <!-- Player Hands -->
    <div id="player-hands" class="player-hands">
      <!-- Hands will be generated dynamically -->
    </div>

    <!-- Betting Area -->
    <div class="betting-area">
      <!-- Hand Selector -->
      <div class="hand-selector" id="hand-selector">
        <button class="hand-btn active" data-hand="0">Hand 1</button>
        <button class="hand-btn" data-hand="1">Hand 2</button>
        <button class="hand-btn" data-hand="2">Hand 3</button>
        <button class="hand-btn" data-hand="3">Hand 4</button>
      </div>

      <!-- Chips -->
      <div class="chips-container">
        <div class="chip chip-5" data-value="5">
          <div class="chip-value">$5</div>
        </div>
        <div class="chip chip-10" data-value="10">
          <div class="chip-value">$10</div>
        </div>
        <div class="chip chip-25" data-value="25">
          <div class="chip-value">$25</div>
        </div>
        <div class="chip chip-50" data-value="50">
          <div class="chip-value">$50</div>
        </div>
        <div class="chip chip-100" data-value="100">
          <div class="chip-value">$100</div>
        </div>
      </div>

      <!-- Game Controls -->
      <div class="game-controls">
        <button id="deal-btn" class="btn-success">Deal Cards</button>
        <button id="clear-bets-btn" class="btn-danger">Clear All Bets</button>
        <button id="repeat-bet-btn">Repeat Last Bet</button>
        <button id="deposit-more-btn">Deposit More</button>
      </div>
    </div>
  </div>

  <!-- Insurance Modal -->
  <div id="insurance-modal" class="insurance-modal hidden">
    <div class="insurance-content">
      <h3 class="insurance-title">🛡️ Insurance</h3>
      <p class="insurance-text">
        The dealer is showing an Ace.<br>
        Would you like to take insurance?<br>
        <strong>Cost: $<span id="insurance-cost">0</span></strong>
      </p>
      <div class="insurance-buttons">
        <button class="btn-success" onclick="game.takeInsurance()">Take Insurance</button>
        <button class="btn-danger" onclick="game.declineInsurance()">No Thanks</button>
      </div>
    </div>
  </div>

  <!-- Result Modal -->
  <div id="result-modal" class="result-modal hidden">
    <div class="result-content">
      <h2 class="result-title" id="result-title">Hand Complete</h2>
      <div class="result-details" id="result-details"></div>
      <div class="result-payout" id="result-payout">+$0</div>
      <button class="btn-primary" onclick="game.continueGame()">Continue Playing</button>
    </div>
  </div>

  <script>
    class EliteBlackjackGame {
      constructor() {
        this.playerName = '';
        this.balance = 0;
        this.deck = [];
        this.dealerHand = [];
        this.playerHands = [
          { cards: [], bet: 0, active: false, finished: false, doubled: false, split: false },
          { cards: [], bet: 0, active: false, finished: false, doubled: false, split: false },
          { cards: [], bet: 0, active: false, finished: false, doubled: false, split: false },
          { cards: [], bet: 0, active: false, finished: false, doubled: false, split: false }
        ];
        this.currentHand = 0;
        this.selectedHandForBetting = 0;
        this.gameActive = false;
        this.dealerRevealed = false;
        this.insuranceTaken = false;
        this.lastBets = [0, 0, 0, 0];
        
        // Statistics
        this.stats = {
          handsWon: 0,
          handsLost: 0,
          pushes: 0,
          blackjacks: 0
        };
        
        // Enhanced dealer dialogue with name personalization
        this.dealerQuotes = {
          welcome: [
            "Welcome to my table, {name}! Ready for some serious blackjack?",
            "Good to see you, {name}! Let's make some money today.",
            "Hey there {name}! Take a seat and let's play some cards.",
            "{name}, you look like a winner. Let's see if you can prove it!"
          ],
          betting: [
            "Place your bets, {name}. Good luck!",
            "{name}, what's your wager going to be?",
            "Time to bet, {name}. Feeling lucky?",
            "Your move, {name}. How much are you risking?"
          ],
          deal: [
            "Here we go, {name}! Cards are coming out.",
            "Dealing the cards now, {name}. Let's see what you get.",
            "Cards in the air for {name}!",
            "{name}, here come your cards!"
          ],
          hitStand: [
            "{name}, what's it going to be? Hit or stand?",
            "Your choice, {name}. Hit me or stay put?",
            "{name}, the decision is yours. What do you want to do?",
            "It's up to you now, {name}. Hit or stand?"
          ],
          hit: [
            "One more for {name}!",
            "Card coming your way, {name}!",
            "Here's another one, {name}!",
            "Let's see what this brings you, {name}!"
          ],
          stand: [
            "Standing pat, {name}? Let's see what I've got.",
            "{name} is staying. Time for the dealer to play.",
            "Alright {name}, my turn now.",
            "{name} stands. Let's reveal the cards."
          ],
          double: [
            "Doubling down, {name}? Bold move!",
            "{name} doubles! One card coming up.",
            "Double or nothing, {name}! Here's your card.",
            "Doubling down, {name}. Let's see if it pays off!"
          ],
          split: [
            "Splitting those cards, {name}? Good strategy!",
            "{name} splits! Now you've got two hands to win with.",
            "Split 'em up, {name}! Double your chances.",
            "Nice split, {name}! Let's play both hands."
          ],
          insurance: [
            "{name}, I'm showing an Ace. Insurance?",
            "Want to protect that bet, {name}?",
            "{name}, insurance is available if you want it.",
            "Ace showing, {name}. Insurance bet?"
          ],
          bust: [
            "Bust, {name}! Better luck next hand.",
            "Over 21, {name}! House wins this one.",
            "That's a bust, {name}. Cards weren't kind.",
            "Too many points, {name}! Try again next hand."
          ],
          dealerBust: [
            "I busted, {name}! You win!",
            "Over 21! Nice win, {name}!",
            "Dealer busts! Congratulations, {name}!",
            "I went too far, {name}. You're the winner!"
          ],
          win: [
            "Great hand, {name}! You beat me fair and square.",
            "Well played, {name}! That's a winner.",
            "Nice job, {name}! You've got the touch.",
            "Excellent work, {name}! You're on fire!"
          ],
          lose: [
            "House wins this round, {name}. Better luck next time.",
            "Not your hand this time, {name}.",
            "Cards favored the house, {name}.",
            "I got you this time, {name}. Next hand is yours!"
          ],
          push: [
            "It's a push, {name}! We're even.",
            "Tie game, {name}! Your bet comes back.",
            "Same totals, {name}! Nobody wins this one.",
            "Push, {name}! We'll call it even."
          ],
          blackjack: [
            "Blackjack, {name}! Outstanding!",
            "Natural 21, {name}! Perfect hand!",
            "{name} gets blackjack! That's the way to do it!",
            "Blackjack pays 3 to 2, {name}! Excellent!"
          ],
          lowMoney: [
            "Running low on funds, {name}? Play it smart.",
            "{name}, your bankroll is getting thin.",
            "Careful with those bets, {name}.",
            "Don't go broke on my watch, {name}!"
          ],
          bigWin: [
            "That's a big win, {name}! You're killing it!",
            "Impressive, {name}! Keep this up!",
            "{name}, you're having a great session!",
            "You're on a roll, {name}! Well done!"
          ],
          multipleHands: [
            "{name}, you're playing multiple hands. Good strategy!",
            "Multiple hands, {name}? You're feeling confident!",
            "{name} is spreading the action. Smart play!",
            "Playing all the angles, {name}. I like it!"
          ]
        };
        
        this.initializeGame();
      }
      
      initializeGame() {
        this.bindEvents();
        this.buildDeck();
        this.updateDisplay();
        this.createPlayerHands();
      }
      
      bindEvents() {
        // Chip betting
        document.querySelectorAll('.chip').forEach(chip => {
          chip.addEventListener('click', () => {
            if (!this.gameActive) {
              this.placeBet(parseInt(chip.dataset.value));
            }
          });
        });
        
        // Hand selection for betting
        document.querySelectorAll('.hand-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            if (!this.gameActive) {
              this.selectHand(parseInt(btn.dataset.hand));
            }
          });
        });
        
        // Deposit amounts
        document.querySelectorAll('.deposit-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            document.querySelectorAll('.deposit-btn').forEach(b => b.classList.remove('selected'));
            btn.classList.add('selected');
            document.getElementById('custom-amount').value = btn.dataset.amount;
          });
        });
        
        // Game controls
        document.getElementById('deal-btn').addEventListener('click', () => this.startNewRound());
        document.getElementById('clear-bets-btn').addEventListener('click', () => this.clearAllBets());
        document.getElementById('repeat-bet-btn').addEventListener('click', () => this.repeatLastBet());
        document.getElementById('deposit-more-btn').addEventListener('click', () => this.showDepositScreen());
      }
      
      createPlayerHands() {
        const handsContainer = document.getElementById('player-hands');
        handsContainer.innerHTML = '';
        
        for (let i = 0; i < 4; i++) {
          const handContainer = document.createElement('div');
          handContainer.className = 'hand-container';
          handContainer.id = `hand-${i}`;
          
          handContainer.innerHTML = `
            <div class="hand-info">
              <div class="hand-bet">Bet: $<span id="bet-${i}">0</span></div>
              <div class="hand-total" id="total-${i}">-</div>
            </div>
            <div class="hand-cards" id="cards-${i}"></div>
            <div class="hand-controls" id="controls-${i}">
              <button onclick="game.hit(${i})" class="btn-success" disabled>Hit</button>
              <button onclick="game.stand(${i})" class="btn-danger" disabled>Stand</button>
              <button onclick="game.double(${i})" disabled>Double</button>
              <button onclick="game.split(${i})" disabled>Split</button>
            </div>
          `;
          
          handsContainer.appendChild(handContainer);
        }
      }
      
      setPlayerName() {
        const nameInput = document.getElementById('player-name');
        if (nameInput.value.trim()) {
          this.playerName = nameInput.value.trim();
          document.getElementById('display-name').textContent = this.playerName;
          this.showDepositScreen();
        } else {
          alert('Please enter your name!');
        }
      }
      
      showDepositScreen() {
        document.getElementById('welcome-screen').classList.add('hidden');
        document.getElementById('deposit-screen').classList.remove('hidden');
        document.getElementById('game-table').classList.add('hidden');
      }
      
      processDeposit() {
        const customAmount = document.getElementById('custom-amount').value;
        const amount = parseInt(customAmount);
        
        if (amount && amount >= 100 && amount <= 100000) {
          this.balance = amount;
          this.showGameTable();
          this.speak(this.getRandomQuote('welcome'));
        } else {
          alert('Please enter a valid amount between $100 and $100,000');
        }
      }
      
      showGameTable() {
        document.getElementById('welcome-screen').classList.add('hidden');
        document.getElementById('deposit-screen').classList.add('hidden');
        document.getElementById('game-table').classList.remove('hidden');
        this.updateDisplay();
      }
      
      buildDeck() {
        const suits = ['♠', '♥', '♦', '♣'];
        const values = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
        
        this.deck = [];
        
        // Use multiple decks for more realistic casino experience
        for (let deckCount = 0; deckCount < 6; deckCount++) {
          for (let suit of suits) {
            for (let value of values) {
              this.deck.push({ suit, value });
            }
          }
        }
        
        this.shuffleDeck();
      }
      
      shuffleDeck() {
        for (let i = this.deck.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [this.deck[i], this.deck[j]] = [this.deck[j], this.deck[i]];
        }
      }
      
      selectHand(handIndex) {
        this.selectedHandForBetting = handIndex;
        document.querySelectorAll('.hand-btn').forEach((btn, index) => {
          btn.classList.toggle('active', index === handIndex);
        });
      }
      
      placeBet(amount) {
        const hand = this.playerHands[this.selectedHandForBetting];
        
        if (this.balance >= amount && !this.gameActive) {
          hand.bet += amount;
          this.balance -= amount;
          this.updateDisplay();
          this.updateHandDisplay(this.selectedHandForBetting);
          
          // Visual feedback
          const chip = document.querySelector(`[data-value="${amount}"]`);
          chip.style.transform = 'scale(1.2) translateY(-10px)';
          setTimeout(() => chip.style.transform = '', 300);
        }
      }
      
      clearAllBets() {
        if (!this.gameActive) {
          for (let i = 0; i < 4; i++) {
            this.balance += this.playerHands[i].bet;
            this.playerHands[i].bet = 0;
            this.updateHandDisplay(i);
          }
          this.updateDisplay();
        }
      }
      
      repeatLastBet() {
        if (!this.gameActive) {
          let totalNeeded = this.lastBets.reduce((sum, bet) => sum + bet, 0);
          
          if (this.balance >= totalNeeded && totalNeeded > 0) {
            for (let i = 0; i < 4; i++) {
              this.playerHands[i].bet = this.lastBets[i];
              this.balance -= this.lastBets[i];
              this.updateHandDisplay(i);
            }
            this.updateDisplay();
          }
        }
      }
      
      startNewRound() {
        // Check if any hands have bets
        const totalBets = this.playerHands.reduce((sum, hand) => sum + hand.bet, 0);
        if (totalBets === 0) {
          this.speak("Place your bets first, " + this.playerName + "!");
          return;
        }
        
        // Save last bets
        this.lastBets = this.playerHands.map(hand => hand.bet);
        
        this.gameActive = true;
        this.dealerRevealed = false;
        this.insuranceTaken = false;
        this.currentHand = 0;
        
        // Reset hands
        this.dealerHand = [];
        for (let i = 0; i < 4; i++) {
          if (this.playerHands[i].bet > 0) {
            this.playerHands[i].cards = [];
            this.playerHands[i].active = true;
            this.playerHands[i].finished = false;
            this.playerHands[i].doubled = false;
            this.playerHands[i].split = false;
          } else {
            this.playerHands[i].active = false;
            this.playerHands[i].finished = true;
          }
        }
        
        // Clear cards visually
        document.getElementById('dealer-cards').innerHTML = '';
        for (let i = 0; i < 4; i++) {
          document.getElementById(`cards-${i}`).innerHTML = '';
        }
        
        this.speak(this.getRandomQuote('deal'));
        
        // Deal initial cards
        setTimeout(() => this.dealInitialCards(), 1000);
      }
      
      dealInitialCards() {
        let dealDelay = 0;
        const activeHands = this.playerHands.filter(hand => hand.active);
        
        // First card to each active hand
        for (let i = 0; i < 4; i++) {
          if (this.playerHands[i].active) {
            setTimeout(() => this.dealCard(i, false), dealDelay);
            dealDelay += 300;
          }
        }
        
        // First dealer card
        setTimeout(() => this.dealDealerCard(false), dealDelay);
        dealDelay += 300;
        
        // Second card to each active hand
        for (let i = 0; i < 4; i++) {
          if (this.playerHands[i].active) {
            setTimeout(() => this.dealCard(i, false), dealDelay);
            dealDelay += 300;
          }
        }
        
        // Second dealer card (face down)
        setTimeout(() => this.dealDealerCard(true), dealDelay);
        
        // Check for dealer ace (insurance) and blackjacks
        setTimeout(() => {
          this.updateAllHandDisplays();
          this.checkForInsurance();
        }, dealDelay + 500);
      }
      
      dealCard(handIndex, hidden = false) {
        if (this.deck.length < 10) {
          this.buildDeck();
        }
        
        const card = this.deck.pop();
        this.playerHands[handIndex].cards.push(card);
        
        const cardElement = this.createCardElement(card, hidden);
        const cardsContainer = document.getElementById(`cards-${handIndex}`);
        cardsContainer.appendChild(cardElement);
        
        return cardElement;
      }
      
      dealDealerCard(hidden = false) {
        if (this.deck.length < 10) {
          this.buildDeck();
        }
        
        const card = this.deck.pop();
        this.dealerHand.push(card);
        
        const cardElement = this.createCardElement(card, hidden);
        const dealerContainer = document.getElementById('dealer-cards');
        dealerContainer.appendChild(cardElement);
        
        return cardElement;
      }
      
      createCardElement(card, hidden = false) {
        const cardEl = document.createElement('div');
        cardEl.className = 'card dealing';
        if (hidden) cardEl.classList.add('flipped');
        
        const face = document.createElement('div');
        face.className = 'card-face';
        if (card.suit === '♥' || card.suit === '♦') {
          face.classList.add('red');
        }
        
        const suitSize = card.value === '10' ? '16px' : '20px';
        face.innerHTML = `
          <div>${card.value}</div>
          <div style="font-size: ${suitSize};">${card.suit}</div>
          <div style="transform: rotate(180deg);">${card.value}</div>
        `;
        
        const back = document.createElement('div');
        back.className = 'card-back';
        
        cardEl.appendChild(face);
        cardEl.appendChild(back);
        
        return cardEl;
      }
      
      checkForInsurance() {
        if (this.dealerHand[0].value === 'A') {
          // Check if any active hands can take insurance
          const activeHands = this.playerHands.filter(hand => hand.active);
          if (activeHands.length > 0) {
            const totalInsuranceCost = activeHands.reduce((sum, hand) => sum + Math.floor(hand.bet / 2), 0);
            
            if (this.balance >= totalInsuranceCost) {
              this.showInsuranceModal(totalInsuranceCost);
              return;
            }
          }
        }
        
        this.checkForBlackjacks();
      }
      
      showInsuranceModal(cost) {
        document.getElementById('insurance-cost').textContent = cost;
        document.getElementById('insurance-modal').classList.remove('hidden');
        this.speak(this.getRandomQuote('insurance'));
      }
      
      takeInsurance() {
        const activeHands = this.playerHands.filter(hand => hand.active);
        const totalCost = activeHands.reduce((sum, hand) => sum + Math.floor(hand.bet / 2), 0);
        
        this.balance -= totalCost;
        this.insuranceTaken = true;
        this.updateDisplay();
        
        document.getElementById('insurance-modal').classList.add('hidden');
        this.checkForBlackjacks();
      }
      
      declineInsurance() {
        document.getElementById('insurance-modal').classList.add('hidden');
        this.checkForBlackjacks();
      }
      
      checkForBlackjacks() {
        const dealerBlackjack = this.isBlackjack(this.dealerHand);
        let playerBlackjacks = [];
        
        // Check each active hand for blackjack
        for (let i = 0; i < 4; i++) {
          if (this.playerHands[i].active && this.isBlackjack(this.playerHands[i].cards)) {
            playerBlackjacks.push(i);
          }
        }
        
        if (dealerBlackjack || playerBlackjacks.length > 0) {
          this.dealerRevealed = true;
          this.revealDealerCard();
          
          setTimeout(() => {
            if (dealerBlackjack) {
              // Handle insurance payout
              if (this.insuranceTaken) {
                const activeHands = this.playerHands.filter(hand => hand.active);
                const insurancePayout = activeHands.reduce((sum, hand) => sum + hand.bet, 0);
                this.balance += insurancePayout;
                this.speak(`Insurance pays off, ${this.playerName}! Dealer has blackjack.`);
              }
              
              // Check for pushes with player blackjacks
              for (let handIndex of playerBlackjacks) {
                this.playerHands[handIndex].finished = true;
                // Push - return bet
                this.balance += this.playerHands[handIndex].bet;
                this.stats.pushes++;
              }
              
              // Dealer wins other hands
              for (let i = 0; i < 4; i++) {
                if (this.playerHands[i].active && !playerBlackjacks.includes(i)) {
                  this.playerHands[i].finished = true;
                  this.stats.handsLost++;
                }
              }
              
              this.speak(`Dealer blackjack! ${playerBlackjacks.length > 0 ? 'Pushes for your blackjacks' : 'House wins'}, ${this.playerName}.`);
            } else {
              // Player blackjacks win
              for (let handIndex of playerBlackjacks) {
                this.playerHands[handIndex].finished = true;
                const payout = Math.floor(this.playerHands[handIndex].bet * 2.5); // 3:2 payout
                this.balance += payout;
                this.stats.handsWon++;
                this.stats.blackjacks++;
              }
              
              if (playerBlackjacks.length > 0) {
                this.speak(this.getRandomQuote('blackjack'));
              }
            }
            
            setTimeout(() => {
              if (this.allHandsFinished()) {
                this.endRound();
              } else {
                this.findNextActiveHand();
                this.playCurrentHand();
              }
            }, 2000);
          }, 1000);
          
          return;
        }
        
        this.findNextActiveHand();
        this.playCurrentHand();
      }
      
      findNextActiveHand() {
        for (let i = 0; i < 4; i++) {
          if (this.playerHands[i].active && !this.playerHands[i].finished) {
            this.currentHand = i;
            return;
          }
        }
        this.currentHand = -1;
      }
      
      playCurrentHand() {
        if (this.currentHand === -1 || this.allHandsFinished()) {
          this.dealerPlay();
          return;
        }
        
        this.updateHandControls();
        const handNumber = this.currentHand + 1;
        this.speak(this.getRandomQuote('hitStand').replace('{name}', `${this.playerName} (Hand ${handNumber})`));
      }
      
      hit(handIndex) {
        if (handIndex !== this.currentHand || this.playerHands[handIndex].finished) return;
        
        this.speak(this.getRandomQuote('hit'));
        
        setTimeout(() => {
          this.dealCard(handIndex, false);
          
          setTimeout(() => {
            this.updateHandDisplay(handIndex);
            const handValue = this.getHandValue(this.playerHands[handIndex].cards);
            
            if (handValue > 21) {
              this.playerHands[handIndex].finished = true;
              this.stats.handsLost++;
              this.speak(this.getRandomQuote('bust'));
              
              setTimeout(() => {
                this.findNextActiveHand();
                this.playCurrentHand();
              }, 1500);
            } else {
              this.updateHandControls();
            }
          }, 600);
        }, 500);
      }
      
      stand(handIndex) {
        if (handIndex !== this.currentHand || this.playerHands[handIndex].finished) return;
        
        this.playerHands[handIndex].finished = true;
        this.speak(this.getRandomQuote('stand'));
        
        setTimeout(() => {
          this.findNextActiveHand();
          this.playCurrentHand();
        }, 1000);
      }
      
      double(handIndex) {
        if (handIndex !== this.currentHand || this.playerHands[handIndex].finished) return;
        if (this.playerHands[handIndex].cards.length !== 2) return;
        if (this.balance < this.playerHands[handIndex].bet) return;
        
        this.balance -= this.playerHands[handIndex].bet;
        this.playerHands[handIndex].bet *= 2;
        this.playerHands[handIndex].doubled = true;
        
        this.speak(this.getRandomQuote('double'));
        
        setTimeout(() => {
          this.dealCard(handIndex, false);
          
          setTimeout(() => {
            this.updateDisplay();
            this.updateHandDisplay(handIndex);
            this.playerHands[handIndex].finished = true;
            
            const handValue = this.getHandValue(this.playerHands[handIndex].cards);
            if (handValue > 21) {
              this.stats.handsLost++;
              this.speak(this.getRandomQuote('bust'));
            }
            
            setTimeout(() => {
              this.findNextActiveHand();
              this.playCurrentHand();
            }, 1500);
          }, 600);
        }, 500);
      }
      
      split(handIndex) {
        if (handIndex !== this.currentHand || this.playerHands[handIndex].finished) return;
        if (this.playerHands[handIndex].cards.length !== 2) return;
        if (this.playerHands[handIndex].cards[0].value !== this.playerHands[handIndex].cards[1].value) return;
        if (this.balance < this.playerHands[handIndex].bet) return;
        
        // Find next available hand
        let nextHandIndex = -1;
        for (let i = 0; i < 4; i++) {
          if (!this.playerHands[i].active) {
            nextHandIndex = i;
            break;
          }
        }
        
        if (nextHandIndex === -1) return; // No available hands
        
        this.balance -= this.playerHands[handIndex].bet;
        
        // Move second card to new hand
        const secondCard = this.playerHands[handIndex].cards.pop();
        this.playerHands[nextHandIndex].cards = [secondCard];
        this.playerHands[nextHandIndex].bet = this.playerHands[handIndex].bet;
        this.playerHands[nextHandIndex].active = true;
        this.playerHands[nextHandIndex].finished = false;
        this.playerHands[nextHandIndex].split = true;
        this.playerHands[handIndex].split = true;
        
        // Update displays
        this.updateDisplay();
        this.updateHandDisplay(handIndex);
        this.updateHandDisplay(nextHandIndex);
        
        // Remove second card visually from original hand
        const originalCards = document.getElementById(`cards-${handIndex}`);
        if (originalCards.children.length > 1) {
          const cardToMove = originalCards.children[1];
          originalCards.removeChild(cardToMove);
          
          // Add to new hand
          const newHandCards = document.getElementById(`cards-${nextHandIndex}`);
          newHandCards.appendChild(cardToMove);
        }
        
        this.speak(this.getRandomQuote('split'));
        
        // Deal new cards to both hands
        setTimeout(() => {
          this.dealCard(handIndex, false);
          setTimeout(() => {
            this.dealCard(nextHandIndex, false);
            
            setTimeout(() => {
              this.updateHandDisplay(handIndex);
              this.updateHandDisplay(nextHandIndex);
              this.updateHandControls();
            }, 600);
          }, 300);
        }, 1000);
      }
      
      allHandsFinished() {
        return this.playerHands.every(hand => !hand.active || hand.finished);
      }
      
      dealerPlay() {
        if (!this.dealerRevealed) {
          this.dealerRevealed = true;
          this.revealDealerCard();
        }
        
        setTimeout(() => {
          const dealerValue = this.getHandValue(this.dealerHand);
          this.updateDealerDisplay();
          
          if (dealerValue < 17) {
            setTimeout(() => {
              this.dealDealerCard(false);
              
              setTimeout(() => {
                this.dealerPlay();
              }, 800);
            }, 1000);
          } else {
            setTimeout(() => this.endRound(), 1000);
          }
        }, 1000);
      }
      
      revealDealerCard() {
        const dealerCards = document.getElementById('dealer-cards');
        const flippedCards = dealerCards.querySelectorAll('.flipped');
        
        flippedCards.forEach(card => {
          card.classList.remove('flipped');
        });
        
        this.updateDealerDisplay();
      }
      
      endRound() {
        const dealerValue = this.getHandValue(this.dealerHand);
        const dealerBusted = dealerValue > 21;
        
        if (dealerBusted) {
          this.speak(this.getRandomQuote('dealerBust'));
        }
        
        let totalWinnings = 0;
        let results = [];
        
        for (let i = 0; i < 4; i++) {
          if (!this.playerHands[i].active) continue;
          
          const hand = this.playerHands[i];
          const playerValue = this.getHandValue(hand.cards);
          let result, payout = 0;
          
          if (playerValue > 21) {
            result = 'bust';
            // Already handled in hit function
          } else if (dealerBusted) {
            result = 'win';
            payout = hand.bet * 2;
            this.stats.handsWon++;
          } else if (playerValue > dealerValue) {
            result = 'win';
            payout = hand.bet * 2;
            this.stats.handsWon++;
          } else if (playerValue < dealerValue) {
            result = 'lose';
            this.stats.handsLost++;
          } else {
            result = 'push';
            payout = hand.bet;
            this.stats.pushes++;
          }
          
          this.balance += payout;
          totalWinnings += payout - hand.bet;
          
          results.push({
            hand: i + 1,
            result,
            playerValue,
            payout: payout - hand.bet
          });
        }
        
        // Reset hands
        for (let i = 0; i < 4; i++) {
          this.playerHands[i] = {
            cards: [],
            bet: 0,
            active: false,
            finished: false,
            doubled: false,
            split: false
          };
        }
        
        this.gameActive = false;
        this.updateDisplay();
        this.updateStats();
        
        // Show results
        setTimeout(() => {
          this.showResults(results, dealerValue, totalWinnings);
          
          // Check for low money
          if (this.balance < 50 && this.balance > 0) {
            setTimeout(() => this.speak(this.getRandomQuote('lowMoney')), 3000);
          } else if (totalWinnings >= 200) {
            setTimeout(() => this.speak(this.getRandomQuote('bigWin')), 3000);
          }
        }, 2000);
      }
      
      showResults(results, dealerValue, totalWinnings) {
        const modal = document.getElementById('result-modal');
        const title = document.getElementById('result-title');
        const details = document.getElementById('result-details');
        const payout = document.getElementById('result-payout');
        
        // Determine overall result
        let overallResult = 'lose';
        if (totalWinnings > 0) {
          overallResult = 'win';
          title.textContent = `Congratulations, ${this.playerName}!`;
        } else if (totalWinnings === 0) {
          overallResult = 'push';
          title.textContent = 'Push!';
        } else {
          title.textContent = `Better luck next time, ${this.playerName}!`;
        }
        
        title.className = `result-title ${overallResult}`;
        
        // Build details
        let detailsHTML = `<div><strong>Dealer: ${dealerValue}${dealerValue > 21 ? ' (Bust!)' : ''}</strong></div><br>`;
        
        results.forEach(result => {
          const status = result.result === 'win' ? '✅ Win' : 
                        result.result === 'lose' ? '❌ Lose' :
                        result.result === 'push' ? '🤝 Push' : '💥 Bust';
          
          detailsHTML += `<div>Hand ${result.hand}: ${result.playerValue} - ${status}</div>`;
        });
        
        details.innerHTML = detailsHTML;
        
        // Show payout
        if (totalWinnings > 0) {
          payout.textContent = `+${totalWinnings}`;
          payout.style.color = 'var(--green)';
        } else if (totalWinnings < 0) {
          payout.textContent = `-${Math.abs(totalWinnings)}`;
          payout.style.color = 'var(--red)';
        } else {
          payout.textContent = '$0';
          payout.style.color = 'var(--gold)';
        }
        
        modal.classList.remove('hidden');
      }
      
      continueGame() {
        document.getElementById('result-modal').classList.add('hidden');
        
        if (this.balance <= 0) {
          this.speak(`You're out of money, ${this.playerName}! Time to make another deposit.`);
          setTimeout(() => this.showDepositScreen(), 2000);
        } else {
          this.speak(this.getRandomQuote('betting'));
        }
      }
      
      updateHandControls() {
        for (let i = 0; i < 4; i++) {
          const controls = document.getElementById(`controls-${i}`);
          const buttons = controls.querySelectorAll('button');
          
          if (i === this.currentHand && this.playerHands[i].active && !this.playerHands[i].finished) {
            // Enable hit and stand
            buttons[0].disabled = false; // Hit
            buttons[1].disabled = false; // Stand
            
            // Double - only on first two cards with enough money
            buttons[2].disabled = this.playerHands[i].cards.length !== 2 || 
                                  this.balance < this.playerHands[i].bet ||
                                  this.playerHands[i].doubled;
            
            // Split - only on matching pairs with enough money and available hand
            const canSplit = this.playerHands[i].cards.length === 2 &&
                           this.playerHands[i].cards[0].value === this.playerHands[i].cards[1].value &&
                           this.balance >= this.playerHands[i].bet &&
                           this.playerHands.some(hand => !hand.active);
            
            buttons[3].disabled = !canSplit;
          } else {
            buttons.forEach(btn => btn.disabled = true);
          }
        }
      }
      
      updateHandDisplay(handIndex) {
        const hand = this.playerHands[handIndex];
        const betElement = document.getElementById(`bet-${handIndex}`);
        const totalElement = document.getElementById(`total-${handIndex}`);
        
        betElement.textContent = hand.bet;
        
        if (hand.cards.length > 0) {
          const value = this.getHandValue(hand.cards);
          totalElement.textContent = `Total: ${value}`;
          
          // Add special styling
          totalElement.className = 'hand-total';
          if (value > 21) {
            totalElement.classList.add('bust');
          } else if (this.isBlackjack(hand.cards)) {
            totalElement.classList.add('blackjack');
          }
        } else {
          totalElement.textContent = '-';
          totalElement.className = 'hand-total';
        }
      }
      
      updateAllHandDisplays() {
        for (let i = 0; i < 4; i++) {
          this.updateHandDisplay(i);
        }
        this.updateDealerDisplay();
      }
      
      updateDealerDisplay() {
        const dealerTotal = document.getElementById('dealer-total');
        
        if (this.dealerHand.length === 0) {
          dealerTotal.style.display = 'none';
          return;
        }
        
        const value = this.dealerRevealed ? 
          this.getHandValue(this.dealerHand) : 
          this.getCardValue(this.dealerHand[0]);
        
        dealerTotal.textContent = this.dealerRevealed ? 
          `Total: ${value}` : 
          `Showing: ${value}`;
        
        dealerTotal.style.display = 'block';
        
        // Add special styling
        dealerTotal.className = 'dealer-total';
        if (this.dealerRevealed && value > 21) {
          dealerTotal.style.background = 'linear-gradient(135deg, var(--red), var(--red-dark))';
        } else if (this.dealerRevealed && this.isBlackjack(this.dealerHand)) {
          dealerTotal.style.background = 'linear-gradient(135deg, var(--green), var(--green-dark))';
        }
      }
      
      updateDisplay() {
        document.getElementById('balance').textContent = this.balance;
        document.getElementById('display-name').textContent = this.playerName;
      }
      
      updateStats() {
        document.getElementById('hands-won').textContent = this.stats.handsWon;
        document.getElementById('hands-lost').textContent = this.stats.handsLost;
        document.getElementById('pushes').textContent = this.stats.pushes;
        
        const totalHands = this.stats.handsWon + this.stats.handsLost + this.stats.pushes;
        const winRate = totalHands > 0 ? Math.round((this.stats.handsWon / totalHands) * 100) : 0;
        document.getElementById('win-rate').textContent = winRate + '%';
      }
      
      getHandValue(cards) {
        let value = 0;
        let aces = 0;
        
        for (let card of cards) {
          if (card.value === 'A') {
            aces++;
            value += 11;
          } else if (['K', 'Q', 'J'].includes(card.value)) {
            value += 10;
          } else {
            value += parseInt(card.value);
          }
        }
        
        // Adjust for aces
        while (value > 21 && aces > 0) {
          value -= 10;
          aces--;
        }
        
        return value;
      }
      
      getCardValue(card) {
        if (card.value === 'A') return 11;
        if (['K', 'Q', 'J'].includes(card.value)) return 10;
        return parseInt(card.value);
      }
      
      isBlackjack(cards) {
        return cards.length === 2 && this.getHandValue(cards) === 21;
      }
      
      speak(message, duration = 4000) {
        const speechBubble = document.getElementById('dealer-speech');
        speechBubble.textContent = message;
        speechBubble.classList.remove('hidden');
        
        // Reset animation
        speechBubble.style.animation = 'none';
        speechBubble.offsetHeight; // Trigger reflow
        speechBubble.style.animation = 'fadeIn 0.5s ease';
        
        setTimeout(() => {
          speechBubble.classList.add('hidden');
        }, duration);
      }
      
      getRandomQuote(category) {
        const quotes = this.dealerQuotes[category];
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        return quote.replace(/{name}/g, this.playerName);
      }
    }
    
    // Initialize game
    const game = new EliteBlackjackGame();
  </script>
</body>
</html>
